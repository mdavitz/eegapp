<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Ensures responsive scaling on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>Video-Based EEG Curriculum</title>
  <style>
    /* Basic reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      background: #f0f2f5;
      color: #333;
      line-height: 1.5;
    }

    /* Header styling */
    header {
      background: linear-gradient(135deg, #003366, #00509e);
      color: #fff;
      text-align: center;
      padding: 1.5em 1em;
      margin-bottom: 1em;
    }
    header h1 {
      font-size: 1.8rem;
      margin-bottom: 0.3em;
    }
    header p {
      font-size: 1rem;
      opacity: 0.9;
    }

    /* Dropdown Navigation */
    .dropdown {
      position: relative;
      display: inline-block;
      width: 100%;
      background: #fff;
      border-bottom: 1px solid #ccc;
      padding: 0.8em 1em;
      font-size: 0.9rem;
      cursor: pointer;
    }
    #dropdown-label {
      display: inline-block;
    }
    .dropdown::after {
      content: "▼";
      float: right;
      font-size: 0.8rem;
      margin-top: 2px;
    }
    .dropdown-menu {
      display: none;
      position: absolute;
      background: #fff;
      width: 100%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 100;
    }
    .dropdown-menu div {
      padding: 0.8em 1em;
      border-bottom: 1px solid #eee;
      cursor: pointer;
    }
    .dropdown-menu div:hover {
      background: #e6f2ff;
    }
    .dropdown.active .dropdown-menu {
      display: block;
    }

    /* Main container */
    .container {
      max-width: 650px;
      margin: 0 auto;
      padding: 0 1em 2em;
    }

    /* Info box, references, etc. */
    .info-box,
    .references {
      background: #fff;
      padding: 1em;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 1em;
    }
    .info-box h2, .references h2 {
      margin-bottom: 0.75em;
    }

    /* Responsive table container */
    .table-responsive {
      width: 100%;
      overflow-x: auto; /* enables horizontal scroll on narrow screens */
    }

    /* Table styling for daily expectations, teaching rounds, etc. */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
      table-layout: auto;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5em;
      text-align: left;
      vertical-align: top;
      word-wrap: break-word;
    }
    th {
      background-color: #f8f9fa;
    }

    /* Buttons row for EEG Index & Milestones */
    .btn-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1em;
      margin: 1em 0;
    }
    .upload-btn {
      display: inline-block;
      padding: 0.75em 1.5em;
      margin: 0.5em;
      font-size: 1rem;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .upload-btn:hover {
      background-color: #0069d9;
    }

    /* EEG Videos sub-list styling */
    .video-list {
      background: #fff;
      padding: 1em;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 1em;
    }
    .video-list h2 {
      margin-bottom: 0.75em;
    }
    .video-list ul {
      list-style: none;
      margin-top: 0.5em;
    }
    .video-list li {
      padding: 0.6em 0;
      cursor: pointer;
      border-bottom: 1px solid #eee;
    }
    .video-list li:hover {
      background-color: #e6f2ff;
    }

    /* Video container */
    .video-container {
      text-align: center;
      margin-bottom: 1em;
    }
    video {
      width: 100%;
      max-width: 650px;
      height: auto;
      border-radius: 6px;
      background-color: #000;
      border: 1px solid #ccc;
    }
    .skip-btn {
      display: inline-block;
      padding: 0.7em 1.2em;
      margin: 0.5em 0;
      font-size: 1rem;
      background-color: #28a745;
      border: none;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .skip-btn:hover {
      background-color: #218838;
    }

    /* Quiz container */
    .quiz-container {
      background: #fff;
      padding: 1em;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: none;
    }
    .quiz-container h2 {
      font-size: 1.15rem;
      margin-bottom: 0.75em;
    }
    .answers button {
      display: block;
      width: 100%;
      padding: 0.75em;
      margin: 0.5em 0;
      font-size: 1rem;
      text-align: left;
      color: #333;
      background-color: #e9ecef;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .answers button:hover {
      background-color: #d6d8db;
    }
    .feedback {
      margin-top: 0.75em;
      font-size: 1rem;
      min-height: 1.5em;
    }
    .correct-msg {
      color: #155724;
      background-color: #d4edda;
      padding: 0.5em;
      border-radius: 4px;
      border: 1px solid #c3e6cb;
    }
    .incorrect-msg {
      color: #721c24;
      background-color: #f8d7da;
      padding: 0.5em;
      border-radius: 4px;
      border: 1px solid #f5c6cb;
    }

    /* Buttons for quiz navigation */
    .buttons-row {
      margin-top: 1em;
      display: flex;
      justify-content: space-between;
      gap: 1%;
    }
    .next-btn,
    .return-btn,
    .next-section-btn {
      width: 32%;
      padding: 0.75em;
      font-size: 1rem;
      border: none;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      text-align: center;
    }
    .next-btn {
      background-color: #003366;
    }
    .next-btn:hover {
      background-color: #002147;
    }
    .return-btn {
      background-color: #6c757d;
    }
    .return-btn:hover {
      background-color: #5a6268;
    }
    .next-section-btn {
      background-color: #17a2b8;
    }
    .next-section-btn:hover {
      background-color: #138496;
    }
    .final-score {
      text-align: center;
      margin-top: 1em;
      font-size: 1.1rem;
      font-weight: bold;
    }

    /* references spacing */
    .references ol {
      margin-left: 1.5rem;
      margin-top: 0.5rem;
    }
    .references ol li {
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    /* Slightly reduce font size on narrower screens for better table fit */
    @media (max-width: 480px) {
      table, th, td {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Video-Based EEG Curriculum</h1>
    <p>Self-Assessment with Videos & Quizzes</p>
  </header>

  <!-- Dropdown Navigation -->
  <div class="dropdown" id="dropdown">
    <span id="dropdown-label">Select Section</span>
    <div class="dropdown-menu" id="dropdown-menu">
      <div data-index="0">Epilepsy Rotation</div>
      <div data-index="1">EEG Videos</div>
      <div data-index="2">References</div>
    </div>
  </div>

  <div class="container">
    <div id="section-content"></div>
  </div>

  <script>
    /********************************************
     * Dropdown Toggle Logic
     ********************************************/
    const dropdown = document.getElementById("dropdown");
    const dropdownMenu = document.getElementById("dropdown-menu");

    dropdown.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.classList.toggle("active");
    });

    document.addEventListener("click", (e) => {
      if (!dropdown.contains(e.target)) {
        dropdown.classList.remove("active");
      }
    });


    /********************************************
     * 10 Video Sections with Quizzes
     ********************************************/
    const videoSections = [
      {
        title: "Introduction to EEG",
        video: "EEG1.mp4",
        guide: `
          <div class="guide">
            <h2>How to Use This Curriculum</h2>
            <p>Watch the video or click "Skip to Quiz" at any time.</p>
            <p>Answer each question until you choose the correct answer.</p>
            <p>Your score will be displayed at the end.</p>
          </div>
        `,
        questions: [
          {
            question: "Which of the following landmarks is NOT a landmark used in the measurement of the head for placement of EEG electrodes?",
            answers: [
              { text: "Nasion", feedback: "Incorrect. The nasion is a standard 10-20 landmark." },
              { text: "Mandibular notch", feedback: "Correct. The mandibular notch is not part of the standard 10-20 system." },
              { text: "Inion", feedback: "Incorrect. The inion is a standard 10-20 landmark." },
              { text: "Pre-auricular point", feedback: "Incorrect. Pre-auricular points are standard 10-20 landmarks." }
            ],
            correct: 1
          },
          {
            question: "Which term is used to describe a single 'line' of EEG tracing?",
            answers: [
              { text: "Channel", feedback: "Correct. A channel is a single EEG tracing." },
              { text: "Chain", feedback: "Incorrect. A chain is a series of channels." },
              { text: "Montage", feedback: "Incorrect. A montage displays multiple channels." },
              { text: "Electrode", feedback: "Incorrect. EEG shows differences between electrodes." }
            ],
            correct: 0
          },
          {
            question: "Which location for seizure focus would be least likely to show an interictal abnormality on scalp EEG?",
            answers: [
              { text: "Right frontal convexity", feedback: "Incorrect. This area is superficial." },
              { text: "Left temporal neocortex", feedback: "Incorrect. This area is superficial." },
              { text: "Right parietal lobe", feedback: "Incorrect. This area is superficial." },
              { text: "Left insular cortex", feedback: "Correct. The insular cortex is deep." }
            ],
            correct: 3
          }
        ]
      },
      {
        title: "Polarity Rules",
        video: "EEG2.mp4",
        questions: [
          {
            question: "Which of the following terms is an indicator of the quality of a differential amplifier?",
            answers: [
              { text: "Low-pass filter", feedback: "Incorrect. Refer to the video." },
              { text: "Common mode rejection ratio", feedback: "Correct. Measures how well common inputs are canceled." },
              { text: "High-pass filter", feedback: "Incorrect. Refer to the video." },
              { text: "Time base", feedback: "Incorrect. Refer to the video." }
            ],
            correct: 1
          },
          {
            question: "An upward deflection in an EEG channel indicates which of the following?",
            answers: [
              { text: "Input 1 is positive with respect to Input 2", feedback: "Incorrect. Refer to the video." },
              { text: "Input 2 is negative with respect to Input 1", feedback: "Incorrect. Refer to the video." },
              { text: "Input 1 is negative with respect to Input 2", feedback: "Correct. Upward deflection means Input 1 is negative." },
              { text: "Input 1 is positive with respect to the ground", feedback: "Incorrect. EEG channels measure differences between electrodes." }
            ],
            correct: 2
          },
          {
            question: "What is the significance of a 'phase reversal' on EEG?",
            answers: [
              { text: "Region of maximal negativity on a bipolar montage", feedback: "Correct. Phase reversal = max negativity." },
              { text: "Change from negative to positive polarity", feedback: "Incorrect. Refer to the video." },
              { text: "Change from positive to negative polarity", feedback: "Incorrect. Refer to the video." },
              { text: "Change in frequency of an EEG rhythm", feedback: "Incorrect. Refer to the video." }
            ],
            correct: 0
          }
        ]
      },
      {
        title: "Montages",
        video: "EEG3.mp4",
        questions: [
          {
            question: "Which of these montages is a bipolar montage?",
            answers: [
              { text: "Laplacian", feedback: "Incorrect. Laplacian compares neighbors." },
              { text: "Transverse", feedback: "Correct. Transverse is a bipolar arrangement." },
              { text: "Ipsilateral mastoid", feedback: "Incorrect. Reference montage." },
              { text: "Contralateral mastoid", feedback: "Incorrect. Also reference." }
            ],
            correct: 1
          },
          {
            question: "Which montage is most susceptible to reference contamination?",
            answers: [
              { text: "Anterior-posterior bipolar", feedback: "Incorrect. Refer to the video." },
              { text: "Laplacian", feedback: "Incorrect. Refer to the video." },
              { text: "Ipsilateral mastoid", feedback: "Incorrect. Refer to the video." },
              { text: "Common average reference", feedback: "Correct. It's most susceptible." }
            ],
            correct: 3
          },
          {
            question: "What is a disadvantage of the Laplacian montage?",
            answers: [
              { text: "Not good for focal waveforms", feedback: "Incorrect. It's good for focal issues." },
              { text: "Not good for broadly-distributed waveforms", feedback: "Correct. Laplacian only compares local neighbors." },
              { text: "Susceptible to eye movement artifact", feedback: "Incorrect. It's generally less so." },
              { text: "Susceptible to reference contamination", feedback: "Incorrect. Typically less susceptible." }
            ],
            correct: 1
          }
        ]
      },
      {
        title: "Eye Movements",
        video: "EEG4.mp4",
        questions: [
          {
            question: "What is the polarity of the eye?",
            answers: [
              { text: "Cornea electronegative, retina electropositive", feedback: "Incorrect. Refer to the video." },
              { text: "Cornea electropositive, retina electronegative", feedback: "Correct." },
              { text: "Cornea neutral, retina electronegative", feedback: "Incorrect. Refer to the video." },
              { text: "Cornea electronegative, retina neutral", feedback: "Incorrect. Refer to the video." }
            ],
            correct: 1
          },
          {
            question: "What is Bell’s phenomenon?",
            answers: [
              { text: "Slow lateral eye movements", feedback: "Incorrect. Refer to the video." },
              { text: "Downward deviation with eye closure", feedback: "Incorrect. Refer to the video." },
              { text: "Upward deviation with eye closure", feedback: "Correct." },
              { text: "Rapid eye movements in deep sleep", feedback: "Incorrect. Refer to the video." }
            ],
            correct: 2
          },
          {
            question: "In which electrode regions are lateral eye movements best seen?",
            answers: [
              { text: "Anterior temporal", feedback: "Correct. Lateral EOG best in anterior temporal." },
              { text: "Frontal", feedback: "Incorrect. That's more vertical." },
              { text: "Central", feedback: "Incorrect. Farther from eyes." },
              { text: "Occipital", feedback: "Incorrect. Very far from eyes." }
            ],
            correct: 0
          }
        ]
      },
      {
        title: "Technical Issues",
        video: "EEG5.mp4",
        questions: [
          {
            question: "What is the frequency range of the theta activity in EEG?",
            answers: [
              { text: "Less than 4 Hz", feedback: "Incorrect. That's delta." },
              { text: "4-7 Hz", feedback: "Correct. Theta is 4-7 Hz." },
              { text: "8-13 Hz", feedback: "Incorrect. That's alpha." },
              { text: "More than 13 Hz", feedback: "Incorrect. That's beta." }
            ],
            correct: 1
          },
          {
            question: "What components would a 1 Hz low-frequency filter remove?",
            answers: [
              { text: "All activity below 1 Hz", feedback: "Incorrect. It removes most, but not all." },
              { text: "Most activity below 1 Hz", feedback: "Correct." },
              { text: "All activity above 1 Hz", feedback: "Incorrect. Leaves high frequencies intact." },
              { text: "Most activity above 1 Hz", feedback: "Incorrect." }
            ],
            correct: 1
          },
          {
            question: "What is the significance of 60 Hz artifact in a single channel?",
            answers: [
              { text: "High impedance (poor connection)", feedback: "Correct. That can cause line noise." },
              { text: "Low impedance (good connection)", feedback: "Incorrect." },
              { text: "Excessive digital interference", feedback: "Incorrect. Typically more global." },
              { text: "Excessive muscle activity", feedback: "Incorrect. That looks different." }
            ],
            correct: 0
          }
        ]
      },
      {
        title: "Normal Awake",
        video: "EEG6.mp4",
        questions: [
          {
            question: "What is the relationship of the alpha rhythm to eye closure?",
            answers: [
              { text: "Higher-voltage with eye opening", feedback: "Incorrect. It's the opposite." },
              { text: "Lower-voltage with eye opening, higher-voltage with closure", feedback: "Correct." },
              { text: "No change", feedback: "Incorrect. There is a definite change." },
              { text: "Higher-frequency with eye opening", feedback: "Incorrect." }
            ],
            correct: 1
          },
          {
            question: "What is an acceptable difference in alpha amplitude between hemispheres?",
            answers: [
              { text: "Left up to 50% higher than right", feedback: "Incorrect. Typically the right can be bigger." },
              { text: "Right up to 50% higher than left", feedback: "Correct." },
              { text: "Left up to 75% higher than right", feedback: "Incorrect." },
              { text: "Right up to 75% higher than left", feedback: "Incorrect." }
            ],
            correct: 1
          },
          {
            question: "In which electrode position is the mu rhythm best seen?",
            answers: [
              { text: "Fp2", feedback: "Incorrect. That's frontal." },
              { text: "F8", feedback: "Incorrect. Also frontal." },
              { text: "C4", feedback: "Correct. Mu is sensorimotor." },
              { text: "O4", feedback: "Incorrect. That's occipital alpha." }
            ],
            correct: 2
          }
        ]
      },
      {
        title: "Normal Sleep",
        video: "EEG7.mp4",
        questions: [
          {
            question: "Which of the following is a component of Stage I sleep?",
            answers: [
              { text: "POSTS", feedback: "Correct. Positive Occipital Sharp Transients." },
              { text: "Sleep spindles", feedback: "Incorrect. Stage II." },
              { text: "K-complexes", feedback: "Incorrect. Stage II." },
              { text: "High-voltage polymorphic delta", feedback: "Incorrect. Deep sleep." }
            ],
            correct: 0
          },
          {
            question: "Which is a defining component of Stage II sleep?",
            answers: [
              { text: "POSTS", feedback: "Incorrect. Stage I phenomenon." },
              { text: "Sleep spindles", feedback: "Correct. And K-complexes define Stage II." },
              { text: "High-voltage polymorphic delta", feedback: "Incorrect. Deep sleep." },
              { text: "Slow rolling eye movements", feedback: "Incorrect. Drowsiness." }
            ],
            correct: 1
          },
          {
            question: "Which awake EEG finding is most similar to POSTS?",
            answers: [
              { text: "Mu rhythm", feedback: "Incorrect. Different shape." },
              { text: "Alpha rhythm", feedback: "Incorrect. That's continuous." },
              { text: "Eye blinks", feedback: "Incorrect. Artifact." },
              { text: "Lambda waves", feedback: "Correct. The waking counterpart." }
            ],
            correct: 3
          }
        ]
      },
      {
        title: "Interictal Abnormalities",
        video: "EEG8.mp4",
        questions: [
          {
            question: "Why might some epilepsy patients not show interictal abnormalities?",
            answers: [
              { text: "Superficial cortical region", feedback: "Incorrect. More likely detected if superficial." },
              { text: "Large area of cortex", feedback: "Incorrect. That’s easier to detect." },
              { text: "Very small area of cortex", feedback: "Correct. Might be missed by scalp EEG." },
              { text: "Generalized activity", feedback: "Incorrect. That would be more visible." }
            ],
            correct: 2
          },
          {
            question: "Which is a characteristic of focal epileptiform discharges?",
            answers: [
              { text: "No disruption of background", feedback: "Incorrect. Usually disrupts background." },
              { text: "Duration > 200 ms", feedback: "Incorrect. Usually <200 ms." },
              { text: "Only one phase", feedback: "Incorrect. Usually multiple phases." },
              { text: "After-coming slow wave", feedback: "Correct. A hallmark feature." }
            ],
            correct: 3
          }
        ]
      },
      {
        title: "Focal Slowing",
        video: "EEG9.mp4",
        questions: [
          {
            question: "When is continuous focal polymorphic delta activity most likely observed?",
            answers: [
              { text: "During an absence seizure", feedback: "Incorrect. Absence is generalized 3 Hz." },
              { text: "After an absence seizure", feedback: "Incorrect. Typically normal after." },
              { text: "During a complex partial seizure", feedback: "Incorrect. That’s ictal." },
              { text: "After a complex partial seizure", feedback: "Correct. Postictal slowing." }
            ],
            correct: 3
          },
          {
            question: "What is the difference between focal rhythmic and focal polymorphic delta?",
            answers: [
              { text: "Focal rhythmic delta is more associated with epilepsy", feedback: "Correct. It’s often irritative." },
              { text: "Focal polymorphic delta is more associated with epilepsy", feedback: "Incorrect." },
              { text: "No difference", feedback: "Incorrect. They differ in appearance/meaning." }
            ],
            correct: 0
          },
          {
            question: "What is a breach rhythm?",
            answers: [
              { text: "Focal increase in low-frequency activity", feedback: "Incorrect. It's high freq." },
              { text: "Focal decrease in low-frequency activity", feedback: "Incorrect." },
              { text: "Focal increase in high-frequency activity", feedback: "Correct. Skull defect." },
              { text: "Focal decrease in high-frequency activity", feedback: "Incorrect." }
            ],
            correct: 2
          }
        ]
      },
      {
        title: "Diffuse Slow & Periodic Discharges",
        video: "EEG10.mp4",
        questions: [
          {
            question: "Which finding indicates diffuse cerebral dysfunction?",
            answers: [
              { text: "Anterior-posterior gradient", feedback: "Incorrect. That's normal." },
              { text: "Continuous background", feedback: "Incorrect. Also normal." },
              { text: "Predominantly alpha waveforms", feedback: "Incorrect. Normal awake." },
              { text: "Unreactive background", feedback: "Correct. Means dysfunction." }
            ],
            correct: 3
          },
          {
            question: "Which pattern indicates the most severe dysfunction?",
            answers: [
              { text: "Diffuse polymorphic theta", feedback: "Incorrect. Milder slowing." },
              { text: "Diffuse polymorphic delta", feedback: "Incorrect. More severe but not worst." },
              { text: "Diffuse attenuation", feedback: "Correct. Very severe." },
              { text: "Burst-suppression", feedback: "Incorrect. Also severe, but not as much." }
            ],
            correct: 2
          },
          {
            question: "What is the significance of lateralized periodic discharges (LPDs)?",
            answers: [
              { text: "They are a focal electrographic seizure", feedback: "Incorrect. Not necessarily seizures." },
              { text: "They indicate increased seizure risk", feedback: "Correct. LPDs raise seizure risk." },
              { text: "They are not associated with risk", feedback: "Incorrect." },
              { text: "Only seen in HSV encephalitis", feedback: "Incorrect. Also in many conditions." }
            ],
            correct: 1
          }
        ]
      }
    ];

    /********************************************
     * 3 Main Sections: 
     *  (0) Epilepsy Rotation + Resident Survival
     *  (1) EEG Videos
     *  (2) References
     ********************************************/
    const sections = [
      {
        // Epilepsy Rotation tab
        title: "Epilepsy Rotation",
        type: "info",
        content: `
          <div class="info-box">
            <h2>Epilepsy Rotation</h2>
            <h3>Daily Expectations and Goals</h3>
            <table>
              <thead>
                <tr>
                  <th>Activity</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Watch Video</td>
                  <td>Review the designated EEG video for the day.</td>
                </tr>
                <tr>
                  <td>Complete Quiz</td>
                  <td>Answer the quiz questions associated with the video.</td>
                </tr>
                <tr>
                  <td>Upload EEG</td>
                  <td>Submit one interesting EEG finding using the EEG Index button.</td>
                </tr>
                <tr>
                  <td>Review Milestones</td>
                  <td>Use the Epilepsy Milestones button to review rotation expectations.</td>
                </tr>
              </tbody>
            </table>

            <div class="btn-row">
              <button class="upload-btn" onclick="window.open('https://tally.so/r/mB8obR','_blank')">EEG Index</button>
              <button class="upload-btn" onclick="window.open('https://www.acgme.org/globalassets/pdfs/milestones/epilepsymilestones.pdf','_blank')">Epilepsy Milestones</button>
            </div>

            <p>
              The <strong>Epilepsy Milestones</strong> document outlines the key competencies
              and expectations during your rotation. It serves as a guide to help you track
              your progress, ensuring that you meet the educational benchmarks required for
              your training.
            </p>
          </div>

          <div class="info-box">
            <h2>Resident Survival Guide (Key Info)</h2>

            <h3>Inpatient Rotation (MSH & MSW EMU)</h3>
            <p><strong>AM Workflow (~7am-12pm)</strong></p>
            <p><strong>7-8 AM:</strong> Arrive and preround on EMU/epilepsy consult patients</p>
            <p><strong>8-9 AM:</strong> Attend morning report</p>
            <p><strong>9-10 AM:</strong> Read at least one LTM EEG, draft EEG reports</p>
            <p><strong>10 AM-12 PM:</strong> Round with epilepsy fellow/attending</p>

            <p style="margin-top:0.75em;"><strong>PM Workflow (~12-5pm)</strong></p>
            <p><strong>12-1 PM:</strong> Neurology noon conference</p>
            <p><strong>1-5 PM:</strong> Elective admission H&Ps, consults, follow-up on LTM EEG, read inpatient EEGs, etc.</p>

            <hr style="margin:1em 0;" />

            <h3>Outpatient Rotation</h3>
            <p><strong>MSH Ambulatory EEG / Outpatient (PGY-2)</strong></p>
            <p><strong>8-9 AM:</strong> Morning report</p>
            <p><strong>AM:</strong> Epilepsy clinic or outpatient EEG reading (self-study if no clinic)</p>
            <p><strong>PM:</strong> Resident continuity clinic or faculty clinic, ambulatory EEG readings, etc.</p>
            <p><strong>MSW Outpatient (PGY-2):</strong> Similar schedule with assigned epilepsy clinics & EEG readings.</p>

            <hr style="margin:1em 0;" />

            <h3>Teaching Rounds & Conferences</h3>
            <p>All epilepsy conferences are currently held via Zoom (unless otherwise indicated).</p>
            <div class="table-responsive">
              <table>
                <thead>
                  <tr>
                    <th>Seminar</th>
                    <th>Day/Time</th>
                    <th>Location</th>
                    <th>Notes</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Epilepsy Surgery Conference (mandatory)</td>
                    <td>Wed 4-5:30 PM</td>
                    <td>Levy Library (MSH) / Zoom</td>
                    <td>Epilepsy surgery cases, comprehensive epilepsy team</td>
                  </tr>
                  <tr>
                    <td>Teaching Rounds / Interesting EEGs (mandatory)</td>
                    <td>Wed 1-2 PM</td>
                    <td>Zoom</td>
                    <td>
                      1st Wed: ICU EEGs (joint with NSICU)<br/>
                      2nd & 4th Wed: Faculty lecture series<br/>
                      3rd Wed: Interesting EEGs<br/>
                      5th Wed: Other topics
                    </td>
                  </tr>
                  <tr>
                    <td>Grand Rounds</td>
                    <td>Fri 8-9 AM</td>
                    <td>Hess Center / Remote Access</td>
                    <td>Neurology Grand Rounds (faculty, fellows, residents, students)</td>
                  </tr>
                  <tr>
                    <td>EEG Conference with Residents</td>
                    <td>Biweekly (2nd Fri), 12-1 PM</td>
                    <td>Anbg 14th floor conf room</td>
                    <td>Attending/fellow present interesting EEG cases</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        `
      },
      {
        // EEG Videos tab
        title: "EEG Videos",
        type: "videoGroup",
        videoSections: videoSections
      },
      {
        // References tab
        title: "References",
        type: "references",
        content: `
          <div class="references">
            <h2>References</h2>
            <ol>
              <li>
                <strong>Moeller JJ, Farooque P, Leydon G, Dominguez M, Schwartz ML, Sadler RM.</strong>
                A video-based introductory EEG curriculum for neurology residents and other EEG learners.
                <em>MedEdPORTAL</em>. 2017;13:10570.
                <a href="https://doi.org/10.15766/mep_2374-8265.10570" target="_blank">Link</a>
              </li>
              <li>
                This curriculum is distributed under the Creative Commons Attribution-NonCommercial-ShareAlike license.
              </li>
              <li>
                Additionally, see the
                <a href="https://www.acgme.org/globalassets/pdfs/milestones/epilepsymilestones.pdf" target="_blank">Epilepsy Milestones</a>
                for rotation expectations.
              </li>
            </ol>
          </div>
        `
      }
    ];

    // Global states
    let currentSectionIndex = 0; // 0=Epilepsy Rotation, 1=EEG Videos, 2=References
    let currentVideoIndex = -1;
    let currentQuestionIndex = 0;
    let score = 0;

    const sectionContent = document.getElementById("section-content");

    // Setup top-level dropdown
    const menuItems = document.querySelectorAll(".dropdown-menu div");
    menuItems.forEach((item, idx) => {
      item.addEventListener("click", (e) => {
        e.stopPropagation();
        dropdown.classList.remove("active");
        currentSectionIndex = idx;
        currentVideoIndex = -1;
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById("dropdown-label").textContent = item.textContent;
        renderSection();
      });
    });

    // Main function to render each tab
    function renderSection() {
      const section = sections[currentSectionIndex];
      if (section.type === "info") {
        // Epilepsy Rotation / Resident Survival
        sectionContent.innerHTML = section.content;
      }
      else if (section.type === "videoGroup") {
        // Show the list of EEG videos
        renderVideoList();
      }
      else if (section.type === "references") {
        // References
        sectionContent.innerHTML = section.content;
      }
    }

    // Render the sub-list of video topics
    function renderVideoList() {
      const group = sections[currentSectionIndex];
      let html = `
        <div class="video-list">
          <h2>Select a Video Topic</h2>
          <ul id="video-sub-list">
      `;
      group.videoSections.forEach((vid, i) => {
        html += `<li data-vid-index="${i}">${vid.title}</li>`;
      });
      html += `</ul></div>`;
      sectionContent.innerHTML = html;

      const subList = document.getElementById("video-sub-list");
      const items = subList.querySelectorAll("li");
      items.forEach(item => {
        item.addEventListener("click", () => {
          currentVideoIndex = parseInt(item.getAttribute("data-vid-index"));
          currentQuestionIndex = 0;
          score = 0;
          renderVideoSection(currentVideoIndex);
        });
      });
    }

    // Render the chosen video + quiz
    function renderVideoSection(videoIdx) {
      const group = sections[currentSectionIndex];
      const vid = group.videoSections[videoIdx];

      sectionContent.innerHTML = `
        <h2 style="text-align:center; margin-bottom:1em;">${vid.title}</h2>
        ${vid.guide ? vid.guide : ""}
        <div class="video-container" id="video-container">
          <video id="video" controls>
            <source src="${vid.video}" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          <br />
          <button class="skip-btn" id="skip-btn">Skip to Quiz</button>
        </div>
        <div class="quiz-container" id="quiz-container">
          <div id="question-container"></div>
          <div class="feedback" id="feedback"></div>
          <div class="buttons-row">
            <button class="next-btn" id="next-btn" style="display:none;">Next</button>
            <button class="return-btn" id="return-btn">Return to Video</button>
            <button class="next-section-btn" id="next-section-btn" style="display:none;">Back to Video List</button>
          </div>
          <div class="final-score" id="final-score"></div>
        </div>
      `;

      setupVideoAndQuiz(vid);
    }

    function setupVideoAndQuiz(vid) {
      const videoEl = document.getElementById("video");
      const videoContainer = document.getElementById("video-container");
      const skipBtn = document.getElementById("skip-btn");
      const quizContainer = document.getElementById("quiz-container");
      const questionContainer = document.getElementById("question-container");
      const feedbackDiv = document.getElementById("feedback");
      const nextBtn = document.getElementById("next-btn");
      const returnBtn = document.getElementById("return-btn");
      const nextSectionBtn = document.getElementById("next-section-btn");
      const finalScoreDiv = document.getElementById("final-score");

      currentQuestionIndex = 0;
      score = 0;
      quizContainer.style.display = "none";

      function showQuestion() {
        feedbackDiv.innerHTML = "";
        feedbackDiv.className = "";
        nextBtn.style.display = "none";
        nextSectionBtn.style.display = "none";
        finalScoreDiv.textContent = "";

        const currentQ = vid.questions[currentQuestionIndex];
        questionContainer.innerHTML = `<h2>${currentQ.question}</h2>`;

        let correctChosen = false;
        const answersDiv = document.createElement("div");
        answersDiv.className = "answers";

        currentQ.answers.forEach((ansObj, idx) => {
          const btn = document.createElement("button");
          btn.textContent = ansObj.text;
          btn.addEventListener("click", () => {
            if (!correctChosen && idx === currentQ.correct) {
              correctChosen = true;
              score++;
              feedbackDiv.className = "correct-msg";
              feedbackDiv.textContent = ansObj.feedback;

              if (currentQuestionIndex < vid.questions.length - 1) {
                nextBtn.style.display = "inline-block";
              } else {
                // Final question
                finalScoreDiv.textContent = `Your score: ${score} out of ${vid.questions.length}`;
                nextSectionBtn.textContent = "Back to Video List";
                nextSectionBtn.style.display = "inline-block";
              }
            } else if (idx === currentQ.correct) {
              feedbackDiv.className = "correct-msg";
              feedbackDiv.textContent = ansObj.feedback;
            } else {
              feedbackDiv.className = "incorrect-msg";
              feedbackDiv.textContent = ansObj.feedback;
            }
          });
          answersDiv.appendChild(btn);
        });

        questionContainer.appendChild(answersDiv);
      }

      // When video ends, show quiz
      videoEl.addEventListener("ended", () => {
        videoContainer.style.display = "none";
        quizContainer.style.display = "block";
        showQuestion();
      });

      // Skip to Quiz immediately
      skipBtn.addEventListener("click", () => {
        videoEl.pause();
        videoContainer.style.display = "none";
        quizContainer.style.display = "block";
        showQuestion();
      });

      // Next question
      nextBtn.addEventListener("click", () => {
        currentQuestionIndex++;
        if (currentQuestionIndex < vid.questions.length) {
          showQuestion();
        }
      });

      // Return to Video
      returnBtn.addEventListener("click", () => {
        quizContainer.style.display = "none";
        videoContainer.style.display = "block";
        videoEl.currentTime = 0;
        videoEl.play();
      });

      // Back to Video List
      nextSectionBtn.addEventListener("click", () => {
        renderVideoList();
      });
    }

    // Helper to re-render the video list if user clicks "Back to Video List"
    function renderVideoList() {
      const group = sections[currentSectionIndex];
      let html = `
        <div class="video-list">
          <h2>Select a Video Topic</h2>
          <ul id="video-sub-list">
      `;
      group.videoSections.forEach((vid, i) => {
        html += `<li data-vid-index="${i}">${vid.title}</li>`;
      });
      html += `</ul></div>`;
      sectionContent.innerHTML = html;

      const subList = document.getElementById("video-sub-list");
      const items = subList.querySelectorAll("li");
      items.forEach(item => {
        item.addEventListener("click", () => {
          currentVideoIndex = parseInt(item.getAttribute("data-vid-index"));
          currentQuestionIndex = 0;
          score = 0;
          renderVideoSection(currentVideoIndex);
        });
      });
    }

    // Initially load the Epilepsy Rotation tab
    renderSection();
  </script>
</body>
</html>